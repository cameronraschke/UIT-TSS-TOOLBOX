#!/bin/bash

RED=$(tput setaf 1)
GREEN=$(tput setaf 2)
BLUE=$(tput setaf 4)
BOLD=$(tput bold)
DIM=$(tput dim)
RESET=$(tput sgr0)

date=$(date '+%Y-%m-%d %H:%M:%S')

read -p "Please enter the ${BOLD}${BLUE}tagnumber${RESET}: " tagnumber
read -p "Please enter the ${BOLD}${BLUE}location${RESET}: " location
read -n 1 -p "Please enter the ${BOLD}${BLUE}status${RESET} ${BOLD}${BLUE}[1] Functioning${RESET} ${BOLD}${BLUE}[2] Broken${RESET}: " status

if [[ $condition == "1" ]]; then
    condition="functioning"
    else
    condition="broken"
fi

if [[ $condition == "broken" ]]; then
    read -p "Please enter the ${BOLD}${BLUE}problem${RESET}: " problem
    else
    problem="N/A"
fi



chassisSerial=$(echo "SELECT chassis_serial FROM clientstats WHERE tagnumber = '${tagnumber}';" | mysql -N -pUHouston\! laptopDB)
echo "INSERT INTO locations (tagnumber, chassis_serial, location, status, problem, time) VALUES ('${tagnumber}', '${chassisSerial}', '${location}', '${status}', '${problem}', '${date}')" | uit-tss-db