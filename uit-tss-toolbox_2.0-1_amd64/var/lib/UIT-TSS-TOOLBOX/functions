#!/usr/bin/php
<?php

function filter ($string) {
    if ($string == "" || $string == " " || $string == "NULL" || empty($string) || is_null($string)) {
        return 1;
    } else {
        return 0;
    }
}

function clearArray() {
    unset($GLOBALS["result"]);
    unset($GLOBALS["arr"]);
    unset($GLOBALS["timeArr"]);
}

function timeSinceLastMarker($key) {
    global $timeArr;
    global $execTime;

    if (filter($timeArr) == 1) {
        $timeArr = array();
    }

    if ($key == "start") {
        $timeArr = array();
        array_push($timeArr, hrtime(true));
    }

    if ($key == "end") {
        array_push($timeArr, hrtime(true));
        $execTime = round((end($timeArr) - reset($timeArr)) / 1e9, 4);
    }

    foreach (array_keys($timeArr) as $i) {
        $currentVal = $timeArr[$i];
        if ($i > 0) {
            $previousVal = $timeArr[$i-1];
            $execTime = round(($currentVal - $previousVal) / 1e9, 4);
        } else {
            $execTime = round($currentVal / 1e9, 4);
        }
    }
    echo $execTime;
}

?>