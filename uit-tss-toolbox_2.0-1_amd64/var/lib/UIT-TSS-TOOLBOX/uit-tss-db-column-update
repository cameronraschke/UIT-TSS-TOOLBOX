#!/bin/php
<?php
include('/var/lib/UIT-TSS-TOOLBOX/DB-connect-local.php');

$sql = "UPDATE jobstats SET uuid = NULL WHERE uuid = 'N/A'";
$conn->query($sql);
$sql = "UPDATE jobstats SET uuid = NULL WHERE uuid = ''";
$conn->query($sql);

$sql = "ALTER TABLE jobstats MODIFY COLUMN uuid VARCHAR(64) NOT NULL";
$conn->query($sql);
$sql = "ALTER TABLE jobstats MODIFY COLUMN tagnumber VARCHAR(6) DEFAULT NULL";
$conn->query($sql);
$sql = "ALTER TABLE jobstats MODIFY COLUMN etheraddress VARCHAR(32) DEFAULT NULL";
$conn->query($sql);
$sql = "ALTER TABLE jobstats MODIFY COLUMN date DATE DEFAULT NULL";
$conn->query($sql);
$sql = "ALTER TABLE jobstats MODIFY COLUMN time DATETIME DEFAULT NULL";
$conn->query($sql);
$sql = "ALTER TABLE jobstats MODIFY COLUMN bios_vendor VARCHAR(64) DEFAULT NULL";
$conn->query($sql);
$sql = "ALTER TABLE jobstats MODIFY COLUMN bios_version VARCHAR(64) DEFAULT NULL";
$conn->query($sql);
$sql = "ALTER TABLE jobstats MODIFY COLUMN bios_date VARCHAR(32) DEFAULT NULL";
$conn->query($sql);
$sql = "ALTER TABLE jobstats MODIFY COLUMN bios_revision VARCHAR(64) DEFAULT NULL";
$conn->query($sql);
$sql = "ALTER TABLE jobstats MODIFY COLUMN bios_firmware VARCHAR(64) DEFAULT NULL";
$conn->query($sql);
$sql = "ALTER TABLE jobstats MODIFY COLUMN system_manufacturer VARCHAR(64) DEFAULT NULL";
$conn->query($sql);
$sql = "ALTER TABLE jobstats MODIFY COLUMN system_productname VARCHAR(64) DEFAULT NULL";
$conn->query($sql);
$sql = "ALTER TABLE jobstats MODIFY COLUMN system_serial VARCHAR(64) DEFAULT NULL";
$conn->query($sql);
$sql = "ALTER TABLE jobstats MODIFY COLUMN system_uuid VARCHAR(64) DEFAULT NULL";
$conn->query($sql);
$sql = "ALTER TABLE jobstats MODIFY COLUMN system_sku VARCHAR(64) DEFAULT NULL";
$conn->query($sql);
$sql = "ALTER TABLE jobstats MODIFY COLUMN system_family VARCHAR(64) DEFAULT NULL";
$conn->query($sql);
$sql = "ALTER TABLE jobstats MODIFY COLUMN motherboard_manufacturer VARCHAR(64) DEFAULT NULL";
$conn->query($sql);
$sql = "ALTER TABLE jobstats MODIFY COLUMN motherboard_serial VARCHAR(64) DEFAULT NULL";
$conn->query($sql);
$sql = "ALTER TABLE jobstats MODIFY COLUMN chassis_manufacturer VARCHAR(64) DEFAULT NULL";
$conn->query($sql);
$sql = "ALTER TABLE jobstats MODIFY COLUMN chassis_type VARCHAR(32) DEFAULT NULL";
$conn->query($sql);
$sql = "ALTER TABLE jobstats MODIFY COLUMN chassis_serial VARCHAR(64) DEFAULT NULL";
$conn->query($sql);
$sql = "ALTER TABLE jobstats MODIFY COLUMN chassis_tag VARCHAR(64) DEFAULT NULL";
$conn->query($sql);
$sql = "ALTER TABLE jobstats MODIFY COLUMN chassis_psu VARCHAR(64) DEFAULT NULL";
$conn->query($sql);
$sql = "ALTER TABLE jobstats MODIFY COLUMN cpu_family VARCHAR(64) DEFAULT NULL";
$conn->query($sql);
$sql = "ALTER TABLE jobstats MODIFY COLUMN cpu_manufacturer VARCHAR(64) DEFAULT NULL";
$conn->query($sql);
$sql = "ALTER TABLE jobstats MODIFY COLUMN cpu_version VARCHAR(64) DEFAULT NULL";
$conn->query($sql);


$sql = "ALTER TABLE serverstats MODIFY COLUMN date DATE";
$conn->query($sql);
$sql = "UPDATE serverstats SET date = NULL WHERE date = 'N/A'";
$conn->query($sql);
$sql = "ALTER TABLE serverstats MODIFY COLUMN time DATETIME DEFAULT NULL";
$conn->query($sql);
$sql = "UPDATE serverstats SET time = NULL WHERE time = 'N/A'";
$conn->query($sql);
$sql = "ALTER TABLE serverstats MODIFY COLUMN laptop_count SMALLINT DEFAULT NULL";
$conn->query($sql);
$sql = "UPDATE serverstats SET laptop_count = NULL WHERE laptop_count = 'N/A'";
$conn->query($sql);
$sql = "ALTER TABLE serverstats MODIFY COLUMN last_image_update DATE DEFAULT NULL";
$conn->query($sql);
$sql = "UPDATE serverstats SET last_image_update = NULL WHERE last_image_update = 'N/A'";
$conn->query($sql);
$sql = "ALTER TABLE serverstats MODIFY COLUMN all_jobs MEDIUMINT DEFAULT NULL";
$conn->query($sql);
$sql = "UPDATE serverstats SET all_jobs = NULL WHERE all_jobs = 'N/A'";
$conn->query($sql);
$sql = "ALTER TABLE serverstats MODIFY COLUMN clone_jobs MEDIUMINT DEFAULT NULL";
$conn->query($sql);
$sql = "UPDATE serverstats SET clone_jobs = NULL WHERE clone_jobs = 'N/A'";
$conn->query($sql);
$sql = "ALTER TABLE serverstats MODIFY COLUMN erase_jobs MEDIUMINT DEFAULT NULL";
$conn->query($sql);
$sql = "UPDATE serverstats SET erase_jobs = NULL WHERE erase_jobs = 'N/A'";
$conn->query($sql);
$sql = "ALTER TABLE serverstats MODIFY COLUMN all_avgtime MEDIUMINT DEFAULT NULL";
$conn->query($sql);
$sql = "UPDATE serverstats SET all_avgtime = NULL WHERE all_avgtime = 'N/A'";
$conn->query($sql);
$sql = "ALTER TABLE serverstats MODIFY COLUMN clone_avgtime SMALLINT DEFAULT NULL";
$conn->query($sql);
$sql = "UPDATE serverstats SET clone_avgtime = NULL WHERE clone_avgtime = 'N/A'";
$conn->query($sql);
$sql = "ALTER TABLE serverstats MODIFY COLUMN nvme_erase_avgtime SMALLINT DEFAULT NULL";
$conn->query($sql);
$sql = "UPDATE serverstats SET nvme_erase_avgtime = NULL WHERE nvme_erase_avgtime = 'N/A'";
$conn->query($sql);
$sql = "ALTER TABLE serverstats MODIFY COLUMN ssd_erase_avgtime SMALLINT DEFAULT NULL";
$conn->query($sql);
$sql = "UPDATE serverstats SET sdd_erase_avgtime = NULL WHERE ssd_erase_avgtime = 'N/A'";
$conn->query($sql);
$sql = "ALTER TABLE serverstats MODIFY COLUMN tbw_pcnt TINYINT DEFAULT NULL";
$conn->query($sql);
$sql = "UPDATE serverstats SET tbw_pcnt = NULL WHERE tbw_pcnt = 'N/A'";
$conn->query($sql);
$sql = "ALTER TABLE serverstats MODIFY COLUMN battery_health TINYINT DEFAULT NULL";
$conn->query($sql);
$sql = "UPDATE serverstats SET battery_health = NULL WHERE battery_health = 'N/A'";
$conn->query($sql);
$sql = "ALTER TABLE serverstats MODIFY COLUMN boot_time SMALLINT DEFAULT NULL";
$conn->query($sql);
$sql = "UPDATE serverstats SET boot_time = NULL WHERE boot_time = 'N/A'";
$conn->query($sql);


$conn->close();
?>