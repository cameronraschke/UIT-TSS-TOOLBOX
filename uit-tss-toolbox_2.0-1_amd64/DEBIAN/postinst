#!/bin/bash

/usr/bin/chmod 750 /usr/sbin/uit-*
/usr/bin/chown root:uit /usr/sbin/uit-*
/usr/bin/chmod 750 /usr/sbin/shrl-*
/usr/bin/chown root:uit /usr/sbin/shrl-*
/usr/bin/chmod 750 /var/lib/UIT-TSS-TOOLBOX/ -R
/usr/bin/chown root:uit /var/lib/UIT-TSS-TOOLBOX/ -R

echo -e "\n" >> /etc/cron.d/uit-cron

cp -r /var/lib/UIT-TSS-TOOLBOX/uit-tss-client_2.0-1_amd64/ /home/cameron

chown cameron:cameron /home/cameron/uit-tss-client_2.0-1_amd64/ -R
chmod 755 /home/cameron/uit-tss-client_2.0-1_amd64/DEBIAN/ -R

/usr/bin/chmod 750 /root/firewall
/usr/bin/chown root:root /root/firewall
/usr/bin/chmod 750 /root/startup-script
/usr/bin/chown root:root /root/startup-script

/usr/bin/chown nobody:nogroup /home/images -R

mysql laptopDB < /var/lib/UIT-TSS-TOOLBOX/mysql/mysql-procedures.sql

# Dell Latitude 3460-3560
if [[ ! -f /home/cameron/bios-update/Latitude_3460_3560_A19.exe ]]; then
    wget 'https://dl.dell.com/FOLDER06742651M/1/Latitude_3460_3560_A19.exe' --output-file /home/cameron/bios-update/Latitude_3460_3560_A19.exe
fi
if [[ $(md5sum /home/cameron/bios-update/Latitude_3460_3560_A19.exe | awk '{ print $1 }') != '25baa799bb9216da1ab3ee598d77f0f8' ]]; then
    echo "CHECKSUM FAILED: Latitude_3460_3560_A19.exe"
fi

# Dell Latitude 3400-3500
if [[ ! -f /home/cameron/bios-update/Latitude_3400_3500_1.32.0.exe ]]; then
    wget 'https://dl.dell.com/FOLDER11354435M/1/Latitude_3400_3500_1.32.0.exe' --output-file /home/cameron/bios-update/Latitude_3400_3500_1.32.0.exe
fi
if [[ $(md5sum /home/cameron/bios-update/Latitude_3400_3500_1.32.0.exe | awk '{ print $1 }') != '7de02a186e9167159064f27f07cd92a4' ]]; then
    echo "CHECKSUM FAILED: Latitude_3400_3500_1.32.0.exe"
fi

# Dell Latitude 7X00
if [[ ! -f /home/cameron/bios-update/Latitude_7X00_1.31.0.exe ]]; then
    wget 'https://dl.dell.com/FOLDER11469357M/1/Latitude_7X00_1.31.0.exe' --output-file /home/cameron/bios-update/Latitude_7X00_1.31.0.exe
fi
if [[ $(md5sum /home/cameron/bios-update/Latitude_7X00_1.31.0.exe | awk '{ print $1 }') != 'af5a3c0e14b91af6e6d41e1a19d6379d' ]]; then
    echo "CHECKSUM FAILED: Latitude_7X00_1.31.0.exe"
fi
