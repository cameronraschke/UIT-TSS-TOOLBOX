#!/bin/bash

/usr/bin/chmod 750 /usr/sbin/uit-*
/usr/bin/chown root:uit /usr/sbin/uit-*

/usr/bin/chown root:uit /etc/opt/UIT-TSS-TOOLBOX -R
find /etc/opt/UIT-TSS-TOOLBOX -type d -exec chmod 750 {} \;
find /etc/opt/UIT-TSS-TOOLBOX -type f -exec chmod 660 {} \;

/usr/bin/chown root:uit /var/www/html/management -R
find /var/www/html/management -type d -exec chmod 755 {} \;
find /var/www/html/management -type f -exec chmod 664 {} \;
chown www-data:uit /var/www/html/management/bash/uit-print-pdf
chmod 750 /var/www/html/management/bash/uit-print-pdf

/usr/bin/chown root:uit /srv/UIT-TSS-TOOLBOX/ -R
find /srv/UIT-TSS-TOOLBOX/ -type d -exec chmod 750 {} \;
find /srv/UIT-TSS-TOOLBOX/ -type f -exec chmod 660 {} \;
echo -e "\n" >> /etc/cron.d/uit-cron


(cd /srv/UIT-TSS-TOOLBOX/client/src/
chmod 755 /srv/UIT-TSS-TOOLBOX/client/src/uit-tss-client_2.0-1_amd64/DEBIAN/control
chmod 755 /srv/UIT-TSS-TOOLBOX/client/src/uit-tss-client_2.0-1_amd64/DEBIAN/postinst
dpkg-deb --build --root-owner-group /srv/UIT-TSS-TOOLBOX/client/src/uit-tss-client_2.0-1_amd64 
mv -v /srv/UIT-TSS-TOOLBOX/client/src/uit-tss-client_2.0-1_amd64.deb /srv/UIT-TSS-TOOLBOX/client/pkg/uit-tss-client_2.0-1_amd64.deb 
)


/usr/bin/chmod 750 /home/cameron/firewall
/usr/bin/chown root:root /home/cameron/firewall
/usr/bin/chmod 750 /home/cameron/startup-script
/usr/bin/chown root:root /home/cameron/startup-script

/usr/bin/chown nobody:nogroup /home/images -R

mysql laptopDB < /etc/opt/UIT-TSS-TOOLBOX/server/mysql/mysql-procedures.sql
mysql laptopDB < /etc/opt/UIT-TSS-TOOLBOX/server/mysql/mysql-tables.sql


if [[ ! -f /var/www/html/management/favicon.ico ]]; then
    wget 'https://uh.edu/favicon.ico' --output-document /var/www/html/management/favicon.ico
fi

if [[ ! -f  /var/www/html/management/images/uh-logo.png ]]; then
    wget 'http://www.sa.uh.edu/brand/_img/uh-wide-full-color-rgb.png' --output-document=/var/www/html/management/images/uh-logo.png
fi

rsync -Pav --delete /home/cameron/laptop-pictures/ /var/www/html/management/images/

rsync -Pav --delete /home/cameron/jquery /var/www/html/management/

rsync -Pav --delete /home/cameron/google-charts /var/www/html/management/
